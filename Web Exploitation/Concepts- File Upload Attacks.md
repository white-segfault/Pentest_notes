## Basic Exploitation
#### Absent Validation
```
bc= Have a fuctionality of uploading file

## Arbitrary File Uploads
C= bc
P= Identify whether arbitrary files can be uploaded, sets up for further attacks.

## Identifying Web Framework
C= bc
P= Perform infrstructure enumeration that sets up for further attacks.

## Vulnerability Identification
C= bc, identified framework identification and can perform arbitrary file uploads
P= RCE, furthering our access

## Questions
-> Illustrates how we can also execute other commands such as hostname
```

#### Upload Exploitation
```
bc= Have a fuctionality of uploading file

## Web Shells
C= bc
P= To gain a better understandng of web shell and its functionality

## Writing Custom Web Shell  / ## Reverse Shells /
## Generating Custom Reverse Shell Scripts
C= bc 
P= RCE (except web shell is more likely to work than reverse shells)


## Quesions
- Illustrated how we can get a webshell and perform RCE.
```

## Bypassing Filters
#### Client-Side Validation
```
bc= Have upload functionality

## Client-Side Validation
C= bc
P= Better understanding of client-side validation and identifying it

## Back-end Request Modification
C= bc, have client-side validation
P= One way to bypass client-side validation

## Disabling Front-end validation
C= bc, have client-side validation
P= One way to bypass client-side validation

## Questions
-> Illustrates how we can bypass client-side validation and achieve RCE
```

#### Blacklist Filters
```
bc= Have upload functionality

## Blacklisting Extensions
C= bc
P= Better understanding of blacklist extensions and identiying it

## Fuzzing Extensions
C= bc, blacklisting of extensions identified
P= To fuzz for accepted extension, sets up for further attacks on non-blacklisted extensions

## Non-Blacklisted Extensions
C= bc, extension is not blacklisted
P= To bypass filters of blacklist extension to potentially execute code.


## Questions
	-> Illustrate how we sometimes have to bypass multiple filters (client-side and blacklist to achieve an RCE)
```

#### Whitelist Filters
```
bc= Have an upload functionality

## Whitelisting Extensions 
C= bc
P= Better understanding of whitelisting extensions and identifying whitelist filters

## Double Extensions / ## Reverse Double / ## Character Injection
C= bc, identified an whitelist filters, follow methodology outlined in workflow
P= To bypass whitelist filters


## Workflow:
C= bc, identified an whitelist filters
P= To bypass whitelisting of filtering in the most efficient manner possible (personal tailored methodology)

## Questions
- We saw an upload functionality with client-side, blacklist and whitelist test.
- Client side we can bypass with burp modification.

- We execute the workflow constructued.

-## Reverse double
	-> use the hello world for checking script execution
	<?php echo 'Hello, World!'; ?>
	-> use extension.lst for list of extension we will use and disable url-encoding.

	-> Obtained extension such as .pht, .pgif, .phtm

	-> using zap to test due to burp restriction on speed and some error results.

	-> Obtained .pht, .phar, .pgif, .phtml and .phtm as valid extensions.

	-> Examination of result on reverse double, the location of the file location is profile_images when examining source code after uploading the file: test.pht.png, test.phar.png, test.pgif.png, test.phtml.png

	-> Got a hit test.phar.png

	-> Now writing a shell and getting flag. 
<?php system($_REQUEST['cmd']); ?>

	-> http://94.237.62.149:49764/profile_images/test.phar.png?cmd=cat%20/flag.txt

## Extras:
- Double extension technique all failed, as expected as it is only used for outdated system.

-## Chracter extension:
-> Illustrated how we usually have to bypass filters combined (whitelist, blacklist and server side) and we need to construct an effcieint methodology to meet it. 

-> Also, illustrated how character injection is usually the strongest, as we got 3 hits in this exercise while in reverse double extension we only got one hit of bypassing the filters.
```

#### Type Filters
```
bc= Have an upload functionality.

## Content-Type
C= bc, have content-type filtering
P= To bypass Content-type filtering


## MIME-Type
C= bc, have MIME-type filtering
P= To bypass Mime-type filtering


## Workflow (breakable)
C= bc, have content-type, mime type or/and client-side validation
P= To bypass all these filterings in an efficient methodology, based on their separable nature. 

## Questions: 
-> Illustrates how we often need to bypass all these filters at once.  To do so, we will need to understand the vulnerabilities and come up with an efficient methdology to bypass them. 

-> Also illustrates how double-extension could work in bypassing whtielist filtering! It just worked in this case. 
```

## Other Upload Attacks
#### Limited File Uploads
```
bc= Have file upload functionality

## XSS
C= bc, allows html/svg file extension (preferably have fuzzed through for allowing .svg extension)
P= To perform XSS attacks

## XXE
C= bc, allows html/svg file extension (preferably have fuzzed through for allowing .svg extension)
P= To perform file reading/source file disclosure (which may reveal further weakness)

## DoS
C= bc
P= To gain a understanding of the potential DoS attack we can do.

## Questions:
-> Illustrates how we can performing file reading and source code disclosure to furhter our access (being able to read upload.php allows identification of upload directory and more, performing file reading can reveal alot of the internal working of the system)
```

## Preventing File Upload Vulnerabilities
```
bc= Providing remediation advice to clients

## Extension Validation / ## Content Validation / ## Upload Disclosure
/ ## Further Security
C= bc
P= Using various techniques above mentioned to prevent file upload vulnerabilities. 
```

## Skills Assessment

```
-> Acquired the following skills
	- MIME typing on png files, deliver the payload after the ;
	- the workflow (breakable) can be easily done through following uploading the appropriate file then delivering the payload at the appropriate place
	- Use of both zap and burp as sometimes burp community version has bugs

-> Illustrated that we use front-end bypasses sometimes come handy when we don't know the magic bytes of a specific file (e.g. svg) or just want to upload it without the use of burp or zap
-> Also showed that reverse double extension works quite often, it has worked in this skills assessment as well.
```
